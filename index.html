<!DOCTYPE html>
<html>

  <head>
    <meta charset="UTF-8">

    <!-- Local Style sheet -->
    <link rel="stylesheet" href="./assets/css/index.css" type="text/css"/>

    <!-- Icons -->
    <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">

    <title>prtiql v1.0</title>
  </head>

  <body>
    <div id="background-wrapper">
      <div id="layout-block">

        <!-- Left side block -->
        <div id="left-block">
          <p id="title">PRTIQL</p>
          <p id="sub-title">GAME LAUNCHER</p>
          <p id="intro">
            Front-end application for launching Windows games
            on the Proton runtime.<br>
            Built for Linux enthusiats
            by Linux enthusiats on Linux.
          </p>
          <p class="text-light small"
          style="color: white; font-family: 'Montserrat', sans-serif;"><i class="fas fa-code"></i> with <i class="fas fa-heart"></i> by <a href="#">@nuwnjay</a>
          <br>
          Electron build: v<span id="electron-version" style="font-weight: bold;"></span>
          </p>       
        </div>

        <div id="details-left-block">
          <p id="game-title"></p>
          <p id="desc">
          </p>      
        </div>

        <!-- Right side block with instructions -->
        <div id="instructions-right-block">
          <button class="btn btn-neutral" type="button" id="intialize-btn" style="
          margin-bottom: 15px;">Initialize</button>
          <p id="instructions-initialize">
            Initialize to install relevant dependancies.</br>
            Do not close application while installation is ongoing.
          </p>
        </div>
        <!-- Right side block with game library -->
        <div id="list-right-block">
          <p id="list-header">
            Game Library
          </p>
          </br>
          <div class="gallery js-flickity">
            <div class="gallery-cell" style="content: url('./assets/images/journey.jpg');" id="journey"></div>
            <div class="gallery-cell" style="content: url('./assets/images/firewatch.jpg');"  id="firewatch"></div>  
            <div class="gallery-cell" style="content: url('./assets/images/doom.jpg');"  id="doom"></div>
            <div class="gallery-cell" style="content: url('./assets/images/nfs-heat.png');"  id="nfs"></div>
            <div class="gallery-cell" style="content: url('./assets/images/gtav.jpg');"  id="gtav"></div>
            <div class="gallery-cell" style="content: url('./assets/images/titanfall2.jpg');"  id="titanfall2"></div>
          </div>
        </div>
      </div>
      <div id="preview-block">
        <div id="player" data-plyr-provider="youtube" data-plyr-embed-id="bTqVqk7FSmY"></div>
      </div>
      <div class="wave" id="wave1"></div>
      <div class="wave2" id="wave2"></div>
    </div>

    <!-- You can also require other files to run in this process -->
    <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>

    <script src="./assets/js/core/jquery.min.js"></script> 

    <script src="./renderer.js"></script>
    <script src="./assets/js/flickity.pkgd.js" type="text/javascript"></script>
    <script src="https://cdn.plyr.io/3.5.10/plyr.js"></script>

    <script>if (window.module) module = window.module;</script>
    
    <script>

      const player = new Plyr('#player', {
          hideControls: true,
      });

      // Initialize game library
      var elem = document.querySelector('.gallery');
      flkty = new Flickity(elem, {
          cellAlign: 'center',
          contain: true,
          prevNextButtons: false,
          accessibility: true
      });

      

      // Hover over game card
      $(".gallery-cell").hover( function() {
          $(leftBlock).delay(5000).fadeOut();
          $(wave1).delay(2000).fadeOut();
          $(wave2).delay(2000).fadeOut();
          $("#list-header").delay(2000).fadeOut();
          $("#preview-block").delay(2000).fadeIn();
          player.source = {
              type: 'video',
              sources: [
                  {
                      src: 'p4Q3uh2RaZo',
                      provider: 'youtube',
                  },
              ],
          };

          player.on('ready', () => {
            player.play();
          })
        }, function() {
          $(leftBlock).fadeIn();
          $(wave1).fadeIn();
          $(wave2).fadeIn();
          $("#list-header").fadeIn();
          $("#preview-block").fadeOut();

          player.stop();
      });
    </script>
  </body>

</html>